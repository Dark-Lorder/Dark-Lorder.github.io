---
title: 虚拟化技术
date: 2022-08-10 00:00:00
categories: Hypervisor
tags:
- Hypervisor
---
Hypervisor是所有虚拟化技术的核心。
<!-- more -->

#### 概述
虚拟化技术源于提升计算机硬件资源使用效率的需求，发展出了Xen、KVM等众多硬件虚拟化方式的虚拟机技术、以Docker容器为代表的软件虚拟化技术，虚拟化技术实质上在不同层级上对于计算机的软硬件资源进行了模拟封装，使得这些资源可按需分配、配置和调度，也为云计算的发展奠定了坚实的基础，甚至可以说没有虚拟化技术的发展就没有云计算发展。

“虚拟化”的概念最早于1959年6月提出，牛津大学的计算机教授克里斯·托弗在国际信息处理大会上发表了一篇名为《大型高速计算机中的时间共享》的学术报告，文中首次提出了 “虚拟化” 的基本概念，并论述了什么是虚拟化技术。上个世纪60年代，IBM公司最先进行了虚拟化技术的实践探索，发明了一种操作系统虚拟机技术，允许用户在一台主机上运行多个操作系统，让用户尽可能地充分利用昂贵的大型机资源。最初主要运用于大型服务器上，但随着硬件技术突飞猛进的发展，普通PC的性能越来越强，也可用来运行虚拟机，构建云服务平台。


#### 常用的虚拟化技术有这些

- 微软的Hyper-V
- Linux中的KVM，XEN
- VMware的ESXI
- Docker


虚拟化包含多个层面，比如硬件虚拟化，这种虚拟化从底层的硬件平台直接支持软件环境；另外一种是操作系统虚拟化，这是Linux的一个亮点。

在硬件层之上，独立于操作系统的一层软件被称之为hypervisor，或者叫做虚拟机监视器。hypervisor创建了虚拟化平台，而操作系统实例则运行在这个平台上，这使得硬件平台可以被多个操作系统和应用所共享，从而降低硬件的成本。
运行在hypervisor上面的实体被称为虚拟机，即VM，是用来放置操作系统、应用和数据元的“容器”。虚拟机中的操作系统和应用程序的数据被存储在虚拟磁盘中，hypervisor利用虚拟磁盘来启动虚拟化平台。虚拟机被封装为一个文件，这样比分布式的文件更好管理。

#### 虚拟机：虚拟化硬件

虚拟机 Virtual Machine 指通过软件模拟的具有完整硬件系统功能的、运行在一个完全隔离环境中的完整计算机系统。在实体计算机中能够完成的工作在虚拟机中都能够实现。

在计算机中创建虚拟机时，需要将实体机的部分硬盘和内存容量作为虚拟机的硬盘和内存容量。每个虚拟机都有独立的 CMOS、硬盘和操作系统，可以像使用实体机一样对虚拟机进行操作。在容器技术之前，业界的网红是虚拟机。

虚拟机技术的代表，是 VMWare 和 OpenStack。

#### 容器：将操作系统层虚拟化，是一个标准的软件单元

- 随处运行：容器可以将代码与配置文件和相关依赖库进行打包，从而确保在任何环境下的运行都是一致的。

- 高资源利用率：容器提供进程级的隔离，因此可以更加精细地设置 CPU 和内存的使用率，进而更好地利用服务器的计算资源。

- 快速扩展：每个容器都可作为单独的进程予以运行，并且可以共享底层操作系统的系统资源，这样一来可以加快容器的启动和停止效率。

| 特性       |                            虚拟机                            |                             容器                             |
| ---------- | :----------------------------------------------------------: | :----------------------------------------------------------: |
| 隔离级别   |                          操作系统级                          |                             进程                             |
| 隔离策略   | [Hypervisor](https://baike.baidu.com/item/hypervisor/3353492?fr=aladdin)（虚拟机监控器） | [Cgroups](https://baike.baidu.com/item/Cgroup/4988200?fr=aladdin)（控制组群） |
| 系统资源   |                           5 ～ 15%                           |                           0 ～ 5%                            |
| 启动时间   |                            分钟级                            |                             秒级                             |
| 镜像存储   |                           GB - TB                            |                           KB - MB                            |
| 集群规模   |                             上百                             |                             上万                             |
| 高可用策略 |                       备份、容灾、迁移                       |                       弹性、负载、动态                       |







**参考资料**
[IBM 虚拟机管理器](https://www.ibm.com/cn-zh/topics/hypervisors?mhsrc=ibmsearch_a&mhq=hypervisor)
[RedHat 什么是虚拟机监控程序](https://www.redhat.com/zh/topics/virtualization/what-is-a-hypervisor)
